<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Documentation</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #f8f8f2;
  background-color: #272822;
}
.highlight .err {
  color: #272822;
  background-color: #f92672;
}
.highlight .c, .highlight .cd, .highlight .cm, .highlight .c1, .highlight .cs {
  color: #75715e;
}
.highlight .cp {
  color: #f4bf75;
}
.highlight .nt {
  color: #f4bf75;
}
.highlight .o, .highlight .ow {
  color: #f8f8f2;
}
.highlight .p, .highlight .pi {
  color: #f8f8f2;
}
.highlight .gi {
  color: #a6e22e;
}
.highlight .gd {
  color: #f92672;
}
.highlight .gh {
  color: #66d9ef;
  background-color: #272822;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #ae81ff;
}
.highlight .kc {
  color: #fd971f;
}
.highlight .kt {
  color: #fd971f;
}
.highlight .kd {
  color: #fd971f;
}
.highlight .s, .highlight .sb, .highlight .sc, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #a6e22e;
}
.highlight .sr {
  color: #a1efe4;
}
.highlight .si {
  color: #cc6633;
}
.highlight .se {
  color: #cc6633;
}
.highlight .nn {
  color: #f4bf75;
}
.highlight .nc {
  color: #f4bf75;
}
.highlight .no {
  color: #f4bf75;
}
.highlight .na {
  color: #66d9ef;
}
.highlight .m, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mb, .highlight .mx {
  color: #a6e22e;
}
.highlight .ss {
  color: #a6e22e;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all_nosearch.js"></script>
    <link href="images/favicon.ico" rel="icon" type="image/ico" />
  </head>

  <body class="index" data-languages="[]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <img src="images/logo.png" alt="Logo" />
      <div id="toc">
      </div>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id="introduction">Introduction</h1>

<p>botSON definitions for the bots created and mantained for hubtype.</p>

<p>This folder contains several examples of chatbots defined in our JSON specification language (botSON). Here you&rsquo;ll 
also find the bots we define for our real clients, for demos or for fun (consumer oriented).</p>

<p>botSON is a JSON structure defined to create chatbots. Bots are finite states machines that are able to comunicate 
with external resources and do some stuff defined by their transitions. It uses <a href="http://jinja.pocoo.org/">Jinja</a> to 
give flexible state interactions.</p>

<h1 id="getting-started">Getting Started</h1>

<h2 id="creating-a-state">Creating a state</h2>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"definition"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"initial"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"input"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"variable"</span><span class="p">:</span><span class="s2">"first_text_from_user"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"action"</span><span class="p">:</span><span class="s2">"free_text"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nt">"next_step"</span><span class="p">:</span><span class="w"> </span><span class="s2">"helloworld"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"helloworld"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"output"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Hello World!"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"next_step"</span><span class="p">:</span><span class="w"> </span><span class="s2">"exit"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>The definition of the bot is composed by states. Each one has a <code class="prettyprint">label</code>, a <code class="prettyprint">next_step</code> and at least one <code class="prettyprint">output</code> or 
<code class="prettyprint">input</code>.</p>

<p>Every bot starts it&rsquo;s execution in the state &lsquo;initial&rsquo; when the user does the first input. Then, it goes to the next 
state: &#39;helloworld&rsquo;. There, the bot will output  &#39;Hello World!&rsquo; and go to &#39;exit&rsquo;, where the bot reach the end of 
execution.</p>

<h2 id="basic-bot">Basic bot</h2>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"input_retry"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="nt">"definition"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nt">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"initial"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"input"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nt">"variable"</span><span class="p">:</span><span class="w"> </span><span class="s2">"first_text_from_user"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"action"</span><span class="p">:</span><span class="w"> </span><span class="s2">"free_text"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nt">"next_step"</span><span class="p">:</span><span class="w"> </span><span class="s2">"choice"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nt">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"choice"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"output"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"text"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"data"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Here you have a choice:"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"keyboard"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="p">{</span><span class="nt">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RED"</span><span class="p">,</span><span class="w"> </span><span class="nt">"data"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RED"</span><span class="p">},</span><span class="w">
                    </span><span class="p">{</span><span class="nt">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BLUE"</span><span class="p">,</span><span class="w"> </span><span class="nt">"data"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BLUE"</span><span class="p">},</span><span class="w">
                    </span><span class="p">{</span><span class="nt">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GREEN"</span><span class="p">,</span><span class="w"> </span><span class="nt">"data"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GREEN"</span><span class="p">}</span><span class="w">
                </span><span class="p">]</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nt">"input"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nt">"action"</span><span class="p">:</span><span class="w"> </span><span class="s2">"get_in_set"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"action_parameters"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="s2">"RED"</span><span class="p">,</span><span class="w"> </span><span class="s2">"BLUE"</span><span class="p">,</span><span class="w"> </span><span class="s2">"GREEN"</span><span class="w">
                </span><span class="p">],</span><span class="w">
                </span><span class="nt">"variable"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user_choice"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nt">"next_step"</span><span class="p">:</span><span class="w"> </span><span class="s2">"result"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nt">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"result"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"output"</span><span class="p">:</span><span class="w"> </span><span class="s2">"You're choice was {{user_choice}}"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"next_step"</span><span class="p">:</span><span class="w"> </span><span class="s2">"choice"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nt">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"input_failure"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"output"</span><span class="p">:</span><span class="w"> </span><span class="s2">"You have put an unexpected input 3 times!"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"next_step"</span><span class="p">:</span><span class="w"> </span><span class="s2">"choice"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>A complete bot usually never ends, it loops back to previous states. Also, it can use variables and other forms of 
<code class="prettyprint">input</code> and <code class="prettyprint">output</code> other than simple text.</p>

<p>In this case, after the first text of the user, this bot will show two quick replies (&#39;RED&rsquo;, &#39;BLUE&rsquo; and &#39;GREEN&rsquo;). The 
user can click them or write itself the response. </p>

<p>Then, the bot expects an input string that can be &#39;RED&rsquo;, &#39;BLUE&rsquo; or &#39;GREEN&rsquo;, store it in the variable <code class="prettyprint">user_choice</code> 
and go to the next state <code class="prettyprint">result</code>.</p>

<ul>
<li>If the user wrote anything else, the chatbot would reply with the possible options in a message like &ldquo;Please, 
choose one of the following values: RED, BLUE&rdquo; at most <code class="prettyprint">input_retry</code> times. If it fails all 3 times it will go to the 
state <code class="prettyprint">input_failure</code>.</li>
</ul>

<p>Finally, in the state <code class="prettyprint">result</code> the bot sends a text message saying what was the pick of the user and returns to the 
<code class="prettyprint">choice</code> state.</p>

<h1 id="top-level-properties">Top level properties</h1>

<h2 id="input_retry">input_retry</h2>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"input_retry"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Specifies the number of input failures before the machine goes to the <code class="prettyprint">input_failure</code> state. By default is set to 3.</p>

<h2 id="name">name</h2>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The Weather Bot"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>The name of the bot.</p>

<h2 id="language">language</h2>

<p>Indicates the language the bot will use. Currently this field is not used.</p>

<aside class="softwarn">
Currently this field is not used.
</aside>

<h2 id="defaults">defaults</h2>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"defaults"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"requests"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"headers"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"Authorization"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bearer mytoken"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"context"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"API_URL"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.com"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"foo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bar"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Defines the default values that are used throughout the chatbot flow in different states:</p>

<ul>
<li><strong>requests</strong></li>
</ul>

<p>Currently only supports default <code class="prettyprint">headers</code> to be used in every url request.</p>

<ul>
<li><strong>context</strong></li>
</ul>

<p>Variables that will be always available at any state of the bot. They are recalculed every time there is an input, 
  so, if a bot definition is changed, previous conversations will have updated variables.</p>

<h2 id="triggers">triggers</h2>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"triggers"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"payload"</span><span class="p">:[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"match"</span><span class="p">:</span><span class="s2">"^WATCH_VIDEO_(?P&lt;video_id&gt;[a-z0-9-]+)$"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"context"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nt">"video_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"videos/{{video_id}}.mp4"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nt">"next_step"</span><span class="p">:</span><span class="w"> </span><span class="s2">"watch_video"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nt">"text"</span><span class="p">:[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"match"</span><span class="p">:</span><span class="s2">"trigger_(?P&lt;id&gt;\\w+)"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"next_step"</span><span class="p">:</span><span class="w"> </span><span class="s2">"trigger_{{id}}"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"match"</span><span class="p">:</span><span class="s2">"help"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"next_step"</span><span class="p">:</span><span class="w"> </span><span class="s2">"trigger_help"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Triggers are commands that are available at any point during the bot execution, regardless of its current state.</p>

<ul>
<li><p><code class="prettyprint">text</code> triggers can be fired by user inputs or payloads</p></li>
<li><p><code class="prettyprint">payload</code> triggers can not be fired by user messages. <em>(Higher priority than text triggers.)</em></p></li>
</ul>

<p>Triggers are matched with regular expressions. If the regexp contains named groups, those will be added as variables
with the corresponding matched value. When a user input is captured by a trigger, it is not consumed by the current
state.</p>

<p>Triggers must have valid <code class="prettyprint">next_step</code> and <code class="prettyprint">match</code> attributes. If <code class="prettyprint">next_step</code> is <code class="prettyprint">null</code> the bot will consume that input 
without any change, which is useful if you want to ignore some words. See <a href="#next_step">next_step</a> reference for more 
info.</p>

<p>Usually triggers are used to capture button clicks (what Facebook calls &#39;Postbacks&rsquo;) and general commands like &ldquo;help&rdquo;.</p>

<h2 id="definition">definition</h2>

<p>This field contains an array of all the states of the bot.</p>

<p>When the bot enters a state, the first thing it does is to update the context, then it writes all the outputs
(if any) and finally wait for a user input (if defined).</p>

<aside class="warning">
IMPORTANT: Either 'output&rsquo; or 'input&rsquo; must be defined in each state.
</aside>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"definition"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"initial"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"input"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"action"</span><span class="p">:</span><span class="w"> </span><span class="s2">"free-text"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"variable"</span><span class="p">:</span><span class="w"> </span><span class="s2">"first_input_from_user"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nt">"output"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"text"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"data"</span><span class="p">:</span><span class="w"> </span><span class="s2">"data_of_output"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nt">"next_step"</span><span class="p">:</span><span class="w"> </span><span class="s2">"next_state_in_flow"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"next_state_in_flow"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"context"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"variable_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"variable_value"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nt">"output"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"text"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"data"</span><span class="p">:</span><span class="w"> </span><span class="s2">"data_of_output_in_array"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"text"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"data"</span><span class="p">:</span><span class="w"> </span><span class="s2">"another_output_in_array"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"text"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"data"</span><span class="p">:</span><span class="w"> </span><span class="s2">"variable_name value: {{variable_name}}"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nt">"next_step"</span><span class="p">:</span><span class="w"> </span><span class="s2">"next_state_in_flow"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>It is required a state named <code class="prettyprint">initial</code>, that is the first state in the execution flow. <code class="prettyprint">initial</code> will only start 
after the user sends it&rsquo;s first input. Then, it will update the context, write the outputs and go to <code class="prettyprint">next_step</code>. It 
is recomended that no state go to <code class="prettyprint">initial</code>.</p>

<h3 id="label">label</h3>

<p>The state name.</p>

<h3 id="context">context</h3>

<p><em>(Optional)</em></p>

<p>Variables to be assigned when entering the state.</p>

<h3 id="output">output</h3>

<p><em>(Optional)</em></p>

<p>The bot will send in order all outputs defined here. It has different possible <a href="#output-types">data types</a>.</p>

<h3 id="input">input</h3>

<p><em>(Optional)</em></p>

<p>Input of the bot. It can come from the user or as a response to url calls. The field &ldquo;actions&rdquo; specifies the expected 
<a href="#input-actions">type of input</a>.</p>

<h3 id="next_step">next_step</h3>

<p>Name of the next state in the flow of the bot. For a conditional next_step (i.e. jumping to different states 
depending of variables) see <a href="#templating">templating</a>.</p>

<h1 id="output-types">Output types</h1>

<h2 id="text">Text</h2>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"text"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"data"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Echo!"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h2 id="image">Image</h2>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"image"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"data"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://this.is.the/url/of/the/image.jpg"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h2 id="video">Video</h2>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"video"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"data"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://this.is.the/url/of/the/video.mp4"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre>
<h2 id="audio">Audio</h2>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"audio"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"data"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://this.is.the/url/of/the/audio.mp3"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre>
<h2 id="document">Document</h2>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"document"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"data"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://this.is.the/url/of/the/document.pdf"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h2 id="location">Location</h2>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"location"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"latitude"</span><span class="p">:</span><span class="w"> </span><span class="mf">41.412255</span><span class="p">,</span><span class="w">
  </span><span class="nt">"longitude"</span><span class="p">:</span><span class="w"> </span><span class="mf">2.2079313</span><span class="p">,</span><span class="w">
  </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"My Home"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Hollywood Boulevard 32"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://any.url.com"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Value</th>
<th style="text-align: right"></th>
</tr>
</thead><tbody>
<tr>
<td>type</td>
<td style="text-align: center">&ldquo;location&rdquo;</td>
<td style="text-align: right"></td>
</tr>
<tr>
<td>latitude</td>
<td style="text-align: center">Number</td>
<td style="text-align: right"></td>
</tr>
<tr>
<td>longitude</td>
<td style="text-align: center">Number</td>
<td style="text-align: right"></td>
</tr>
<tr>
<td>title</td>
<td style="text-align: center">String</td>
<td style="text-align: right"><em>optional</em><br><em>32 chars max</em></td>
</tr>
<tr>
<td>address</td>
<td style="text-align: center">String</td>
<td style="text-align: right"><em>optional</em></td>
</tr>
<tr>
<td>url</td>
<td style="text-align: center">String</td>
<td style="text-align: right"><em>optional</em></td>
</tr>
</tbody></table>

<aside class="softwarn">
NOTE: The Location Output is not available on Facebook.
</aside>

<h2 id="contact">Contact</h2>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"contact"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Doe"</span><span class="p">,</span><span class="w">                   </span><span class="err">//Optional</span><span class="w">
  </span><span class="nt">"phone_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"678909909"</span><span class="p">,</span><span class="w">          </span><span class="err">//Optional</span><span class="w">
  </span><span class="nt">"vcard"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vcard:data"</span><span class="w">                 </span><span class="err">//Optional</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h2 id="buttonmessage">Buttonmessage</h2>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buttonmessage"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Pick one option"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"buttons"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"postback"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"title"</span><span class="p">:</span><span class="s2">"Option 1"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"payload"</span><span class="p">:</span><span class="s2">"POSTBACK_1"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"postback"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"title"</span><span class="p">:</span><span class="s2">"Option 2"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"payload"</span><span class="p">:</span><span class="s2">"POSTBACK_2"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"web_url"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"title"</span><span class="p">:</span><span class="s2">"Web url"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"url"</span><span class="p">:</span><span class="s2">"https://www.google.es/"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"phone_number"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"title"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Call"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"payload"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"{% raw %}+44 7700 900200{% endraw %}"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>A collection of at most 4 buttons displayed vertically.</p>

<h3 id="button">Button:</h3>

<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Value</th>
<th style="text-align: right"></th>
</tr>
</thead><tbody>
<tr>
<td>type</td>
<td style="text-align: center">&ldquo;web_url&rdquo;, &ldquo;postback&rdquo; or &ldquo;phone_number&rdquo;</td>
<td style="text-align: right"></td>
</tr>
<tr>
<td>title</td>
<td style="text-align: center">String</td>
<td style="text-align: right"></td>
</tr>
<tr>
<td>url</td>
<td style="text-align: center">String</td>
<td style="text-align: right"><em>mandatory if type is &ldquo;web_url&rdquo;</em></td>
</tr>
<tr>
<td>payload</td>
<td style="text-align: center">String</td>
<td style="text-align: right"><em>mandatory if type is &ldquo;postback&rdquo; or &ldquo;phone_number&rdquo;</em></td>
</tr>
</tbody></table>

<aside class="softwarn">
NOTE: The messagebutton output is only available on Facebook and Telegram. Also, phone_number button type only is 
available on Facebook. Currently other platforms will ignore that output.
</aside>

<h2 id="carrousel">Carrousel</h2>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"carrousel"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"elements"</span><span class="p">:[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Title Element 1"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"subtitle"</span><span class="p">:</span><span class="w"> </span><span class="s2">"My description"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://www.cover.image.jpg"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"buttons"</span><span class="p">:[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"postback"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"My Button"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"payload"</span><span class="p">:</span><span class="w"> </span><span class="s2">"EXTRA_DATA"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Title Element 2"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"subtitle"</span><span class="p">:</span><span class="w"> </span><span class="s2">"My Description"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://www.cover.image.jpg"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"buttons"</span><span class="p">:[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"web_url"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Darse de baja"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://www.some.web.com"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>A rich interactive message that displays a horizontal scrollable carousel of items, each composed of an image 
attachment, short description and buttons to request input from the user.</p>

<p><img width="300" src="images/carrousel.png"></p>

<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Value</th>
<th style="text-align: right"></th>
</tr>
</thead><tbody>
<tr>
<td>type</td>
<td style="text-align: center">&ldquo;carrousel&rdquo;</td>
<td style="text-align: right"></td>
</tr>
<tr>
<td>elements</td>
<td style="text-align: center">Array of Elements</td>
<td style="text-align: right"><em>10 elements max (will truncate)</em></td>
</tr>
</tbody></table>

<h3 id="element">Element:</h3>

<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Value</th>
<th style="text-align: right"></th>
</tr>
</thead><tbody>
<tr>
<td>title</td>
<td style="text-align: center">String</td>
<td style="text-align: right"></td>
</tr>
<tr>
<td>subtitle</td>
<td style="text-align: center">String</td>
<td style="text-align: right"></td>
</tr>
<tr>
<td>image_url</td>
<td style="text-align: center">String</td>
<td style="text-align: right"></td>
</tr>
<tr>
<td>buttons</td>
<td style="text-align: center">Array of Buttons</td>
<td style="text-align: right"><em>3 elements max (will truncate)</em></td>
</tr>
</tbody></table>

<h3 id="button">Button:</h3>

<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Value</th>
<th style="text-align: right"></th>
</tr>
</thead><tbody>
<tr>
<td>type</td>
<td style="text-align: center">&ldquo;web_url&rdquo; or &ldquo;postback&rdquo;</td>
<td style="text-align: right"></td>
</tr>
<tr>
<td>title</td>
<td style="text-align: center">String</td>
<td style="text-align: right"></td>
</tr>
<tr>
<td>url</td>
<td style="text-align: center">String</td>
<td style="text-align: right"><em>mandatory if type is &ldquo;web_url&rdquo;</em></td>
</tr>
<tr>
<td>payload</td>
<td style="text-align: center">String</td>
<td style="text-align: right"><em>mandatory if type is &ldquo;postback&rdquo;</em></td>
</tr>
</tbody></table>

<p><code class="prettyprint">postback</code>: this type of buttons act as if the end-user typed the title of the button.</p>

<p><code class="prettyprint">web_url</code>: this type of buttons open the <code class="prettyprint">url</code> in a browser.</p>

<aside class="softwarn">
NOTE: The carrousel output is only available on Facebook. Currently other platforms will ignore that output.
</aside>

<h2 id="quick-replies">Quick Replies</h2>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"text"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"data"</span><span class="p">:</span><span class="w"> </span><span class="s2">"What do you need?"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"keyboard"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Option One"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"data"</span><span class="p">:</span><span class="w"> </span><span class="s2">"option_1"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Option Two"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"data"</span><span class="p">:</span><span class="w"> </span><span class="s2">"option_2"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Option Three"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"data"</span><span class="p">:</span><span class="w"> </span><span class="s2">"option_3"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Quick Replies are a convenient way to let users know the available options to type. Also, they save the end-user the 
effort to type all words and let them navigate through options much faster.</p>

<p>Any message type accepts a <code class="prettyprint">&quot;keyboard&quot;</code> field with an array of (<code class="prettyprint">&quot;label&quot;</code>, <code class="prettyprint">&quot;data&quot;</code>) pairs.</p>

<aside class="softwarn">
NOTE: Telegram only uses 'label&rsquo;, not 'data&rsquo;.
</aside>

<h1 id="input-actions">Input actions</h1>

<p>The data will be stored in the specified variable. To access the variable see <a href="#templating">Templating</a>.</p>

<h2 id="free-text">Free Text</h2>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"variable"</span><span class="p">:</span><span class="w"> </span><span class="s2">"text_var_name"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"action"</span><span class="p">:</span><span class="w"> </span><span class="s2">"free_text"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h2 id="get-integer">Get Integer</h2>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"variable"</span><span class="p">:</span><span class="w"> </span><span class="s2">"name_of_int_var"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"action"</span><span class="p">:</span><span class="w"> </span><span class="s2">"get_int"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>TODO</p>

<h2 id="get-in-set">Get in Set</h2>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"variable"</span><span class="p">:</span><span class="w"> </span><span class="s2">"name_of_option"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"action"</span><span class="p">:</span><span class="w"> </span><span class="s2">"get_in_set"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"action_parameters"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"op1"</span><span class="p">,</span><span class="w"> </span><span class="s2">"op2"</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Only accepts these parameters as answer. It will ask at most <code class="prettyprint">input_retry</code> times.</p>

<h2 id="get-in-set-fuzzy">Get in Set Fuzzy</h2>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"variable"</span><span class="p">:</span><span class="w"> </span><span class="s2">"object_user_choice"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"action"</span><span class="p">:</span><span class="w"> </span><span class="s2">"get_in_set_fuzzy"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"action_parameters"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"object1"</span><span class="p">,</span><span class="w"> </span><span class="s2">"object2"</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Same as get in set, but it does not require a perfect match.</p>

<h2 id="get-yes-or-no">Get yes or no</h2>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"variable"</span><span class="p">:</span><span class="w"> </span><span class="s2">"confirm_var_name"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"action"</span><span class="p">:</span><span class="w"> </span><span class="s2">"get_yes_no"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>TODO</p>

<h2 id="get-from-url">Get from url</h2>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"variable"</span><span class="p">:</span><span class="w"> </span><span class="s2">"var_name_to_save"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"action"</span><span class="p">:</span><span class="w"> </span><span class="s2">"get_from_url"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"action_parameters"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{{BASE_URL}}path/search/"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"params"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"param1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{{_input}}"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"param2"</span><span class="p">:</span><span class="w"> </span><span class="s2">"val_2"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>TODO - it makes a call to the url and stores the response</p>

<h2 id="get-name">Get name</h2>
<pre class="highlight json"><code><span class="p">{</span><span class="w">

</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>TODO</p>

<h2 id="get-email">Get email</h2>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"variable"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user_email"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"action"</span><span class="p">:</span><span class="w"> </span><span class="s2">"get_email"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Gets the email and check if it is well writed. <strong>something@someother</strong></p>

<h2 id="get-age">Get age</h2>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"action"</span><span class="p">:</span><span class="s2">"get_age"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"variable"</span><span class="p">:</span><span class="s2">"age"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Saves a number representing the age. Age should match 1 &lt;= age &lt; 120 </p>

<h2 id="get-location">Get location</h2>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"action"</span><span class="p">:</span><span class="s2">"get_location"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"variable"</span><span class="p">:</span><span class="s2">"location"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>The variable location will contain the components: <code class="prettyprint">latitude</code> , <code class="prettyprint">longitude</code>, <code class="prettyprint">title</code>, <code class="prettyprint">address</code>, <code class="prettyprint">url</code>. For field 
info see <a href="#location">location</a>.
IMPORTANT: The get location input is only available on Facebook. </p>

<h2 id="get-image">Get image</h2>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"variable"</span><span class="p">:</span><span class="w"> </span><span class="s2">"the_image_url"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"action"</span><span class="p">:</span><span class="w"> </span><span class="s2">"get_image"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>It will save in the variable the url given by the provider ( facebook )
IMPORTANT: The get image input is only available on Facebook. </p>

<h1 id="templating">Templating</h1>

<p>See <a href="http://jinja.pocoo.org/">Jinja</a>.</p>

<h1 id="ai-integration">AI integration</h1>

<p>You are able to use watson or api.ai bots to manage the botSON flow. 
<code class="prettyprint">json
{
  &quot;ai_backends&quot;:{
    &quot;watson&quot;: {
      &quot;username&quot;: &quot;(id)&quot;,
      &quot;password&quot;: &quot;(pass)&quot;,
      &quot;workspace_id&quot;: &quot;(w_id)&quot;
    },
    &quot;api_ai&quot;:{
    &quot;token&quot;:&quot;(token)&quot;
  }
}
}
</code>
To start just configure the credentials</p>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"input"</span><span class="p">:{</span><span class="w">
    </span><span class="nt">"action"</span><span class="p">:</span><span class="s2">"get_intent"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"variable"</span><span class="p">:</span><span class="s2">"variable_name"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"context"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"ai_result_name_var"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ai_conversation(ai_backends, _input)"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Then you can call the ai in two different ways. The object return has <code class="prettyprint">intent</code>, <code class="prettyprint">entities</code> and <code class="prettyprint">raw</code>. Where raw is 
the full API response.</p>

      </div>
      <div class="dark-box">
      </div>
    </div>
  </body>
</html>
